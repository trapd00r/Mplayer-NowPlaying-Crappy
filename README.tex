\section{NAME\label{NAME}\index{NAME}}


Mplayer::NowPlaying - Query metadata information from a running Mplayer process

\section{SYNOPSIS\label{SYNOPSIS}\index{SYNOPSIS}}
\begin{verbatim}
  use strict;
  use Mplayer::NowPlaying qw($np_log np);
\end{verbatim}
\begin{verbatim}
  $np_log = './mplay.log';
\end{verbatim}
\begin{verbatim}
  my $artist = np('artist');
  my $album  = np('album');
  my $title  = np('title');
\end{verbatim}
\begin{verbatim}
  printf("%s - %s (%s)\n", $artist, $title, $album);
\end{verbatim}
\section{DESCRIPTION\label{DESCRIPTION}\index{DESCRIPTION}}


\textbf{Mplayer} does not provide an API, the next best thing is to use the \textit{-slave} option
together with the ability to control it using a named pipe.



\textbf{Mplayer::NowPlaying} exports one function, np(), that takes a single argument,
the metadata tag to return:

\begin{verbatim}
  my $bitrate = np('bitrate'); # 128000
\end{verbatim}


You have to set the logfile to use. \textbf{\$np\_log} is globally exported, so you can do:

\begin{verbatim}
  $np_log = "$ENV{HOME}/.mplayer/mplayer.log";
\end{verbatim}


Valid arguments for the np() function are as follows:

\begin{verbatim}
  title
  artist
  album
  year
  comment
  track
  genre
  bitrate
  codec
  format
  id
  channels
  chapters
  demuxer
  length
  seekable
  start
  file
\end{verbatim}
\section{ENVIRONMENT\label{ENVIRONMENT}\index{ENVIRONMENT}}


You might want to consider aliasing mplayer, since it needs the -identify
switch.

\begin{verbatim}
  alias mplayer="mplayer -identify $@> $HOME/.mplayer/mylog.log"
\end{verbatim}
\section{AUTHOR\label{AUTHOR}\index{AUTHOR}}


Written by Magnus Woldrich.

\section{REPORTING BUGS\label{REPORTING_BUGS}\index{REPORTING BUGS}}


Report bugs to trapd00r@trapd00r.se



Mplayer::NowPlaying home page: $<$http://github.com/trapd00r/Mplayer-NowPlaying/$>$

\section{COPYRIGHT\label{COPYRIGHT}\index{COPYRIGHT}}


Copyright 2010 Magnus Woldrich. License GPLv2: GNU GPL version 2 or later
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

\section{SEE ALSO\label{SEE_ALSO}\index{SEE ALSO}}


\textbf{Radio Playing Daemon} $<$http://github.com/trapd00r/RPD/$>$

